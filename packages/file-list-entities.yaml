#
# Use a service call to "script.print_entities_to_file" to generate a list
#       of entities to the named file below.
#

file_list_entities:

  notify:
    - platform: file
      name: entity_log
      filename: /config/www/entity_log.txt
      timestamp: false

  script:
    print_entities_to_file:
      alias: 'Print Entities To File'
      sequence:
      - service: notify.entity_log
        data_template:
          message: >
            {% for state in states %}
              - {{- state.entity_id -}}
            {% endfor %}
